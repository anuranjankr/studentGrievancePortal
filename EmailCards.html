<html>
<head>
<title>
  Student Portal
</title>
</head>
<body>
  <link rel = "stylesheet" href ="css/EmailCards.css">
  <script src="js/3.4.1-jquery.min.js"></script>
  <script>
    var cardNo = 0;
    var pageLimit=2;
    var emailsLeft = pageLimit;
    var i;
    $(document).ready(function() {
  for(i = 1; i <= pageLimit; i++) {
        $(".EmailList").append('<div id="myCard" class="card'+i+'"><div class="card-content"><input type="checkbox" id="Checkbox'+i+'" /><span class="card-hyperlink'+i+'" id="hrefing"><span class="mail-title"><b>SAMPLE MAIL'+i+' SUBJECT</b></span><span class="mail-description"><b>DESCRIPTION FOR MAIL'+i+'</b></span></span><button type= "button" id = "closed" class="'+ i +'"></button></div></div>');
      }
      var passNoDelete = -1;
      for(i=1;i<=pageLimit;i++)
      {
        var pass1 = '.'+i;
        var pass2 = '#'+"Checkbox"+i;
        var modal = document.getElementById("myModal");
        $(pass1).click(function(e) {
            var myClass = $(this).attr("class");
            var closePass1 = '.'+'card'+myClass;
            cardNo = closePass1;
            e.stopPropagation();

            // Get the button that opens the modal
            //  var btn = document.getElementById("closed");

            // Get the <span> element that closes the modal
            var span = document.getElementsByClassName("close")[0];

              modal.style.display = "block";

            // When the user clicks on <span> (x), close the modal
            span.onclick = function() {
              modal.style.display = "none";
            }

        });
        $(pass2).click(function(e) {
          e.stopPropagation();
        });
      }

      $('#approve-reject').click(function(e) {
      var val = document.getElementById('approveRemark').value;
    //  document.getElementById('myModal').style.display="none";
      if(val != 0)
        {
          $(cardNo).remove();
          document.getElementById('myModal').style.display="none";
          emailsLeft--;
          if(emailsLeft == 0){
            $('.EmailList').append('<h1 class="no_mails"><center> No mails for you </center><h1>');
          }
        }
        else {
          e.stopPropagation();
        }
      });

      for(i=1;i<=pageLimit;i++)
      {
        var pass1 = '.'+'card'+i;
        $(pass1).click(function() {
              $(".EmailList").load("MailRead.html");
        });
      }
  });
  </script>
  <div class="EmailList">
  </div>
  <div id="myModal" class="modal">

    <!-- Modal content -->
    <div class="modal-content">
      <span class="close">&times;</span>
      <label for="remark">Reject (Remarks) :</label><br /><br />
      <textarea id="approveRemark" name="approve-remark" placeholder="Write why it was rejected..." rows="6"></textarea>
      <br>
      <br>
      <div class ="approve" id="approve-reject">Confirm Rejection</div>
    </div>

  </div>
</body>
</html>
